{
    "version": 1,
    "serial": 35,
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {},
            "resources": {
                "aws_instance.vyos01": {
                    "type": "aws_instance",
                    "primary": null,
                    "tainted": [
                        {
                            "id": "i-1f30cd95",
                            "attributes": {
                                "ami": "ami-5e77c229",
                                "associate_public_ip_address": "true",
                                "availability_zone": "eu-west-1b",
                                "ebs_block_device.#": "0",
                                "ebs_optimized": "false",
                                "ephemeral_block_device.#": "0",
                                "iam_instance_profile": "",
                                "id": "i-1f30cd95",
                                "instance_state": "running",
                                "instance_type": "t2.micro",
                                "key_name": "przchrome",
                                "monitoring": "false",
                                "private_dns": "",
                                "private_ip": "10.50.0.67",
                                "public_dns": "",
                                "public_ip": "54.229.26.192",
                                "root_block_device.#": "1",
                                "root_block_device.0.delete_on_termination": "true",
                                "root_block_device.0.iops": "0",
                                "root_block_device.0.volume_size": "4",
                                "root_block_device.0.volume_type": "standard",
                                "security_groups.#": "0",
                                "source_dest_check": "true",
                                "subnet_id": "subnet-efff3a87",
                                "tags.#": "3",
                                "tags.Name": "test-vyos-1.1.0-i01",
                                "tags.environment": "something",
                                "tags.project": "something else",
                                "tenancy": "default",
                                "vpc_security_group_ids.#": "1",
                                "vpc_security_group_ids.2936417429": "sg-ee6b7782"
                            },
                            "meta": {
                                "schema_version": "1"
                            }
                        }
                    ]
                },
                "aws_instance.vyos02": {
                    "type": "aws_instance",
                    "primary": null,
                    "tainted": [
                        {
                            "id": "i-1430cd9e",
                            "attributes": {
                                "ami": "ami-5e77c229",
                                "associate_public_ip_address": "true",
                                "availability_zone": "eu-west-1b",
                                "ebs_block_device.#": "0",
                                "ebs_optimized": "false",
                                "ephemeral_block_device.#": "0",
                                "iam_instance_profile": "",
                                "id": "i-1430cd9e",
                                "instance_state": "running",
                                "instance_type": "t2.micro",
                                "key_name": "przchrome",
                                "monitoring": "false",
                                "private_dns": "",
                                "private_ip": "10.50.0.61",
                                "public_dns": "",
                                "public_ip": "54.194.219.87",
                                "root_block_device.#": "1",
                                "root_block_device.0.delete_on_termination": "true",
                                "root_block_device.0.iops": "0",
                                "root_block_device.0.volume_size": "4",
                                "root_block_device.0.volume_type": "standard",
                                "security_groups.#": "0",
                                "source_dest_check": "true",
                                "subnet_id": "subnet-efff3a87",
                                "tags.#": "3",
                                "tags.Name": "test-vyos-1.1.0-i02",
                                "tags.environment": "something",
                                "tags.project": "something else",
                                "tenancy": "default",
                                "vpc_security_group_ids.#": "1",
                                "vpc_security_group_ids.2936417429": "sg-ee6b7782"
                            },
                            "meta": {
                                "schema_version": "1"
                            }
                        }
                    ]
                },
                "template_file.030_ospf_configuration_vyos01": {
                    "type": "template_file",
                    "primary": {
                        "id": "8dc1a9992c1b8b8b6d0d86bc482c809e0c393b0ff42075f0007e1a2860eda1f0",
                        "attributes": {
                            "id": "8dc1a9992c1b8b8b6d0d86bc482c809e0c393b0ff42075f0007e1a2860eda1f0",
                            "rendered": "#!/bin/vbash\n\nsource /opt/vyatta/etc/functions/script-template\n\nconfigure\n\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'cost' '1'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'dead-interval' '10'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'hello-interval' '2'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'priority' '1'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'retransmit-interval' '3'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'transmit-delay' '1'\n\n#Redistribute dummy dum1 and dum2 into OSPF\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '10' 'action' 'permit'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '10' 'description' 'Dummy dum1'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '10' 'prefix' \"127.0.1.1/32\"\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '20' 'action' 'permit'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '20' 'description' 'Dummy dum2'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '20' 'prefix' \"127.0.1.2/32\"\n\nset 'policy' 'route-map' 'dummyToOspf' 'rule' '10' 'action' 'permit'\nset 'policy' 'route-map' 'dummyToOspf' 'rule' '10' 'match' 'ip' 'address' 'prefix-list' 'plDummyToOspf'\nset 'policy' 'route-map' 'dummyToOspf' 'rule' '9999' 'action' 'deny'\n\nset 'protocols' 'ospf' 'area' '0' 'network' \"192.168.100.12/30\"\nset 'protocols' 'ospf' 'parameters' 'abr-type' 'cisco'\nset 'protocols' 'ospf' 'parameters' 'router-id' \"127.0.1.1\"\nset 'protocols' 'ospf' 'redistribute' 'connected' 'route-map' 'dummyToOspf'\n\ncommit\n\n",
                            "template": "#!/bin/vbash\n\nsource /opt/vyatta/etc/functions/script-template\n\nconfigure\n\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'cost' '1'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'dead-interval' '10'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'hello-interval' '2'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'priority' '1'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'retransmit-interval' '3'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'transmit-delay' '1'\n\n#Redistribute dummy dum1 and dum2 into OSPF\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '10' 'action' 'permit'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '10' 'description' 'Dummy dum1'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '10' 'prefix' \"127.0.${rtr_id_mine}.1/32\"\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '20' 'action' 'permit'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '20' 'description' 'Dummy dum2'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '20' 'prefix' \"127.0.${rtr_id_mine}.2/32\"\n\nset 'policy' 'route-map' 'dummyToOspf' 'rule' '10' 'action' 'permit'\nset 'policy' 'route-map' 'dummyToOspf' 'rule' '10' 'match' 'ip' 'address' 'prefix-list' 'plDummyToOspf'\nset 'policy' 'route-map' 'dummyToOspf' 'rule' '9999' 'action' 'deny'\n\nset 'protocols' 'ospf' 'area' '0' 'network' \"${ospf_area_0_range}\"\nset 'protocols' 'ospf' 'parameters' 'abr-type' 'cisco'\nset 'protocols' 'ospf' 'parameters' 'router-id' \"127.0.${rtr_id_mine}.1\"\nset 'protocols' 'ospf' 'redistribute' 'connected' 'route-map' 'dummyToOspf'\n\ncommit\n\n",
                            "vars.#": "6",
                            "vars.internal_ip_mine": "192.168.100.13",
                            "vars.internal_ip_mine_range": "192.168.100.13/30",
                            "vars.internal_ip_peer": "192.168.100.14",
                            "vars.ospf_area_0_range": "192.168.100.12/30",
                            "vars.rtr_id_mine": "1",
                            "vars.rtr_id_peer": "2"
                        }
                    }
                },
                "template_file.030_ospf_configuration_vyos02": {
                    "type": "template_file",
                    "primary": {
                        "id": "c399effb16c5c7e2b3281cc54ec45341ac0a55b8f7c0a215c88445cae3287a64",
                        "attributes": {
                            "id": "c399effb16c5c7e2b3281cc54ec45341ac0a55b8f7c0a215c88445cae3287a64",
                            "rendered": "#!/bin/vbash\n\nsource /opt/vyatta/etc/functions/script-template\n\nconfigure\n\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'cost' '1'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'dead-interval' '10'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'hello-interval' '2'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'priority' '1'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'retransmit-interval' '3'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'transmit-delay' '1'\n\n#Redistribute dummy dum1 and dum2 into OSPF\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '10' 'action' 'permit'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '10' 'description' 'Dummy dum1'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '10' 'prefix' \"127.0.2.1/32\"\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '20' 'action' 'permit'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '20' 'description' 'Dummy dum2'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '20' 'prefix' \"127.0.2.2/32\"\n\nset 'policy' 'route-map' 'dummyToOspf' 'rule' '10' 'action' 'permit'\nset 'policy' 'route-map' 'dummyToOspf' 'rule' '10' 'match' 'ip' 'address' 'prefix-list' 'plDummyToOspf'\nset 'policy' 'route-map' 'dummyToOspf' 'rule' '9999' 'action' 'deny'\n\nset 'protocols' 'ospf' 'area' '0' 'network' \"192.168.100.12/30\"\nset 'protocols' 'ospf' 'parameters' 'abr-type' 'cisco'\nset 'protocols' 'ospf' 'parameters' 'router-id' \"127.0.2.1\"\nset 'protocols' 'ospf' 'redistribute' 'connected' 'route-map' 'dummyToOspf'\n\ncommit\n\n",
                            "template": "#!/bin/vbash\n\nsource /opt/vyatta/etc/functions/script-template\n\nconfigure\n\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'cost' '1'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'dead-interval' '10'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'hello-interval' '2'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'priority' '1'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'retransmit-interval' '3'\nset 'interfaces' 'tunnel' 'tun1' 'ip' 'ospf' 'transmit-delay' '1'\n\n#Redistribute dummy dum1 and dum2 into OSPF\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '10' 'action' 'permit'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '10' 'description' 'Dummy dum1'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '10' 'prefix' \"127.0.${rtr_id_mine}.1/32\"\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '20' 'action' 'permit'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '20' 'description' 'Dummy dum2'\nset 'policy' 'prefix-list' 'plDummyToOspf' 'rule' '20' 'prefix' \"127.0.${rtr_id_mine}.2/32\"\n\nset 'policy' 'route-map' 'dummyToOspf' 'rule' '10' 'action' 'permit'\nset 'policy' 'route-map' 'dummyToOspf' 'rule' '10' 'match' 'ip' 'address' 'prefix-list' 'plDummyToOspf'\nset 'policy' 'route-map' 'dummyToOspf' 'rule' '9999' 'action' 'deny'\n\nset 'protocols' 'ospf' 'area' '0' 'network' \"${ospf_area_0_range}\"\nset 'protocols' 'ospf' 'parameters' 'abr-type' 'cisco'\nset 'protocols' 'ospf' 'parameters' 'router-id' \"127.0.${rtr_id_mine}.1\"\nset 'protocols' 'ospf' 'redistribute' 'connected' 'route-map' 'dummyToOspf'\n\ncommit\n\n",
                            "vars.#": "6",
                            "vars.internal_ip_mine": "192.168.100.14",
                            "vars.internal_ip_mine_range": "192.168.100.14/30",
                            "vars.internal_ip_peer": "192.168.100.13",
                            "vars.ospf_area_0_range": "192.168.100.12/30",
                            "vars.rtr_id_mine": "2",
                            "vars.rtr_id_peer": "1"
                        }
                    }
                }
            }
        }
    ]
}
